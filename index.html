<!DOCTYPE html>
<html lang="id-ID">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Kotak Komentar</title>
<style>
body {
    font-family: Arial, sans-serif;
    margin: 0;
    padding: 0;
    background-color: #f2f2f2;
}

.container {
    max-width: 800px;
    margin: 20px auto;
    padding: 20px;
    border: 1px solid #ccc;
    border-radius: 5px;
    background-color: #fff;
    box-shadow: 0 0 10px rgba(0, 0, 0, 0.1);
}

.comment {
    border: 1px solid #ccc;
    padding: 10px;
    margin-bottom: 20px; /* Menambah jarak antara komentar */
    background-color: #f9f9f9;
}

.comment .comment-header {
    font-weight: bold;
    margin-bottom: 5px;
}

.comment .comment-body {
    margin-bottom: 10px;
}

.comment .comment-actions button {
    margin-right: 5px;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 3px;
    padding: 5px 10px;
    cursor: pointer;
}

.comment .comment-actions button:hover {
    background-color: #0056b3;
}

.comment .delete-btn {
    background-color: #dc3545;
}

.comment .delete-btn:hover {
    background-color: #bd2130;
}

.comment-reply {
    margin-left: 20px; /* Menambah indentasi untuk balasan */
}

#comment-form {
    margin-top: 20px;
    margin-bottom: 20px; /* Menambah jarak di bawah formulir */
}

#comment-form h2 {
    font-size: 18px;
    margin-bottom: 10px;
}

#comment-form input[type="text"],
#comment-form textarea {
    width: calc(100% - 22px);
    padding: 10px;
    margin-bottom: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
}

#comment-form textarea {
    resize: vertical;
}

#comment-form button {
    width: 100%;
    background-color: #007bff;
    color: #fff;
    border: none;
    border-radius: 3px;
    padding: 10px;
    cursor: pointer;
}

#comment-form button:hover {
    background-color: #0056b3;
}
</style>
</head>
<body>

<div class="container">
    <div id="comment-form">
        <h2>Tambahkan Komentar</h2>
        <input type="text" id="author" placeholder="Nama Anda">
        <textarea id="content" placeholder="Isi Komentar"></textarea>
        <button id="submit-comment">Kirim</button>
    </div>

    <div id="comments-container">
    </div>
</div>

<script>
function createComment(author, date, content, parentId) {
    var commentDiv = document.createElement("div");
    commentDiv.classList.add("comment");
    commentDiv.dataset.commentId = parentId || ''; // Menyimpan ID komentar induk

    var headerDiv = document.createElement("div");
    headerDiv.classList.add("comment-header");
    headerDiv.innerHTML = "<span class='comment-author'>" + author + "</span> <span class='comment-date'>" + date + "</span>";

    var bodyDiv = document.createElement("div");
    bodyDiv.classList.add("comment-body");
    bodyDiv.textContent = content;

    var actionsDiv = document.createElement("div");
    actionsDiv.classList.add("comment-actions");

    var replyBtn = document.createElement("button");
    replyBtn.classList.add("reply-btn");
    replyBtn.textContent = "Reply";

    var likeBtn = document.createElement("button");
    likeBtn.classList.add("like-btn");
    likeBtn.textContent = "Like";

    var deleteBtn = document.createElement("button");
    deleteBtn.classList.add("delete-btn");
    deleteBtn.textContent = "Hapus";

    var likeCountSpan = document.createElement("span");
    likeCountSpan.classList.add("like-count");
    likeCountSpan.textContent = "0";

    actionsDiv.appendChild(replyBtn);
    actionsDiv.appendChild(likeBtn);
    actionsDiv.appendChild(deleteBtn);
    actionsDiv.appendChild(likeCountSpan);

    commentDiv.appendChild(headerDiv);
    commentDiv.appendChild(bodyDiv);
    commentDiv.appendChild(actionsDiv);

    return commentDiv;
}

function replyToComment(event) {
    var parentComment = event.target.closest(".comment");
    var author = parentComment.querySelector(".comment-author").textContent;
    var replyContent = prompt("Reply to " + author + ":");
    if (replyContent) {
        var parentId = parentComment.dataset.commentId; // Mendapatkan ID komentar induk
        var newComment = createComment("You", new Date().toLocaleDateString(), replyContent, parentId);
        newComment.classList.add("comment-reply"); // Menambah kelas untuk membedakan balasan
        parentComment.appendChild(newComment);
        saveComments(); // Simpan komentar setelah membalas
    }
}

function likeComment(event) {
    var likeCountSpan = event.target.parentElement.querySelector(".like-count");
    var likeCount = parseInt(likeCountSpan.textContent);
    likeCount++;
    likeCountSpan.textContent = likeCount;
}

function deleteComment(event) {
    var comment = event.target.closest(".comment");
    comment.remove();
    saveComments();
}

function saveComments() {
    var comments = document.querySelectorAll('.comment');
    var commentsArray = [];
    comments.forEach(function(comment) {
        var commentData = {
            parentId: comment.dataset.commentId, // Menyimpan ID komentar induk
            author: comment.querySelector('.comment-author').textContent,
            date: comment.querySelector('.comment-date').textContent,
            content: comment.querySelector('.comment-body').textContent
        };
        commentsArray.push(commentData);
    });
    localStorage.setItem('comments', JSON.stringify(commentsArray));
}

function loadComments() {
    var comments = localStorage.getItem('comments');
    if (comments) {
        var commentsArray = JSON.parse(comments);
        commentsArray.forEach(function(commentData) {
            var newComment = createComment(commentData.author, commentData.date, commentData.content, commentData.parentId);
            document.getElementById('comments-container').appendChild(newComment);
        });
    }
}

document.addEventListener("DOMContentLoaded", function() {
    loadComments();

    // Tambahkan event listener untuk tombol kirim komentar
    document.getElementById("submit-comment").addEventListener("click", function() {
        var authorInput = document.getElementById("author");
        var contentInput = document.getElementById("content");
        var author = authorInput.value;
        var content = contentInput.value;
        if (author && content) {
            var newComment = createComment(author, new Date().toLocaleDateString(), content);
            document.getElementById('comments-container').appendChild(newComment);
            saveComments();
            authorInput.value = "";
            contentInput.value = "";
        } else {
            alert("Nama dan isi komentar harus diisi!");
        }
    });

    // Tambahkan event listener untuk tombol reply, like, dan delete
    document.getElementById('comments-container').addEventListener("click", function(event) {
        if (event.target.classList.contains("reply-btn")) {
            replyToComment(event);
        } else if (event.target.classList.contains("like-btn")) {
            likeComment(event);
        } else if (event.target.classList.contains("delete-btn")) {
            deleteComment(event);
        }
    });
});
</script>

</body>
</html>

